{"ast":null,"code":"/**\n * Chat Service - Handles API communication with the backend\n * Uses Server-Sent Events (SSE) for real-time streaming\n */\n\n/**\n * Stream chat messages from the backend using SSE\n * @param {string} message - The user's message\n * @param {function} onMessage - Callback function for each message chunk\n * @param {function} onComplete - Callback function when streaming is complete\n * @param {function} onError - Callback function for errors\n * @returns {EventSource} The EventSource instance for cleanup\n */\nconst streamChat = (message, onMessage, onComplete, onError) => {\n  // Create EventSource connection to backend SSE endpoint\n  // The proxy in package.json will forward this to http://localhost:8080\n  const eventSource = new EventSource(`/chat?message=${encodeURIComponent(message)}`);\n\n  // Handle 'message' events - these contain the streamed tokens\n  eventSource.addEventListener('message', event => {\n    try {\n      const data = JSON.parse(event.data);\n      if (data.content) {\n        onMessage(data.content);\n      }\n    } catch (error) {\n      console.error('Error parsing SSE data:', error);\n    }\n  });\n\n  // Handle 'complete' event - signals end of stream\n  eventSource.addEventListener('complete', event => {\n    eventSource.close();\n    onComplete();\n  });\n\n  // Handle connection errors\n  eventSource.onerror = error => {\n    console.error('SSE connection error:', error);\n    eventSource.close();\n\n    // Check if we actually received any data before erroring\n    if (error.target.readyState === EventSource.CLOSED) {\n      onComplete();\n    } else {\n      onError(error);\n    }\n  };\n\n  // Return the eventSource so caller can close it if needed\n  return eventSource;\n};\nexport const chatService = {\n  streamChat\n};","map":{"version":3,"names":["streamChat","message","onMessage","onComplete","onError","eventSource","EventSource","encodeURIComponent","addEventListener","event","data","JSON","parse","content","error","console","close","onerror","target","readyState","CLOSED","chatService"],"sources":["/Users/umashav1/Study/chat-sse-app/frontend/src/services/chatService.js"],"sourcesContent":["/**\n * Chat Service - Handles API communication with the backend\n * Uses Server-Sent Events (SSE) for real-time streaming\n */\n\n/**\n * Stream chat messages from the backend using SSE\n * @param {string} message - The user's message\n * @param {function} onMessage - Callback function for each message chunk\n * @param {function} onComplete - Callback function when streaming is complete\n * @param {function} onError - Callback function for errors\n * @returns {EventSource} The EventSource instance for cleanup\n */\nconst streamChat = (message, onMessage, onComplete, onError) => {\n  // Create EventSource connection to backend SSE endpoint\n  // The proxy in package.json will forward this to http://localhost:8080\n  const eventSource = new EventSource(`/chat?message=${encodeURIComponent(message)}`);\n\n  // Handle 'message' events - these contain the streamed tokens\n  eventSource.addEventListener('message', (event) => {\n    try {\n      const data = JSON.parse(event.data);\n      if (data.content) {\n        onMessage(data.content);\n      }\n    } catch (error) {\n      console.error('Error parsing SSE data:', error);\n    }\n  });\n\n  // Handle 'complete' event - signals end of stream\n  eventSource.addEventListener('complete', (event) => {\n    eventSource.close();\n    onComplete();\n  });\n\n  // Handle connection errors\n  eventSource.onerror = (error) => {\n    console.error('SSE connection error:', error);\n    eventSource.close();\n    \n    // Check if we actually received any data before erroring\n    if (error.target.readyState === EventSource.CLOSED) {\n      onComplete();\n    } else {\n      onError(error);\n    }\n  };\n\n  // Return the eventSource so caller can close it if needed\n  return eventSource;\n};\n\nexport const chatService = {\n  streamChat\n};\n"],"mappings":"AAAA;AACA;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA;AACA;AACA;AACA,MAAMA,UAAU,GAAGA,CAACC,OAAO,EAAEC,SAAS,EAAEC,UAAU,EAAEC,OAAO,KAAK;EAC9D;EACA;EACA,MAAMC,WAAW,GAAG,IAAIC,WAAW,CAAC,iBAAiBC,kBAAkB,CAACN,OAAO,CAAC,EAAE,CAAC;;EAEnF;EACAI,WAAW,CAACG,gBAAgB,CAAC,SAAS,EAAGC,KAAK,IAAK;IACjD,IAAI;MACF,MAAMC,IAAI,GAAGC,IAAI,CAACC,KAAK,CAACH,KAAK,CAACC,IAAI,CAAC;MACnC,IAAIA,IAAI,CAACG,OAAO,EAAE;QAChBX,SAAS,CAACQ,IAAI,CAACG,OAAO,CAAC;MACzB;IACF,CAAC,CAAC,OAAOC,KAAK,EAAE;MACdC,OAAO,CAACD,KAAK,CAAC,yBAAyB,EAAEA,KAAK,CAAC;IACjD;EACF,CAAC,CAAC;;EAEF;EACAT,WAAW,CAACG,gBAAgB,CAAC,UAAU,EAAGC,KAAK,IAAK;IAClDJ,WAAW,CAACW,KAAK,CAAC,CAAC;IACnBb,UAAU,CAAC,CAAC;EACd,CAAC,CAAC;;EAEF;EACAE,WAAW,CAACY,OAAO,GAAIH,KAAK,IAAK;IAC/BC,OAAO,CAACD,KAAK,CAAC,uBAAuB,EAAEA,KAAK,CAAC;IAC7CT,WAAW,CAACW,KAAK,CAAC,CAAC;;IAEnB;IACA,IAAIF,KAAK,CAACI,MAAM,CAACC,UAAU,KAAKb,WAAW,CAACc,MAAM,EAAE;MAClDjB,UAAU,CAAC,CAAC;IACd,CAAC,MAAM;MACLC,OAAO,CAACU,KAAK,CAAC;IAChB;EACF,CAAC;;EAED;EACA,OAAOT,WAAW;AACpB,CAAC;AAED,OAAO,MAAMgB,WAAW,GAAG;EACzBrB;AACF,CAAC","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}